/*********************************************************************************************************************/
/*-----------------------------------------------------Includes------------------------------------------------------*/
/*********************************************************************************************************************/
#include "Set_Driving_Mode.h"

/*********************************************************************************************************************/
/*------------------------------------------------------Macros-------------------------------------------------------*/
/*********************************************************************************************************************/

/*********************************************************************************************************************/
/*-------------------------------------------------Global variables--------------------------------------------------*/
/*********************************************************************************************************************/

/*********************************************************************************************************************/
/*--------------------------------------------Private Variables/Constants--------------------------------------------*/
/*********************************************************************************************************************/

/*********************************************************************************************************************/
/*------------------------------------------------Function Prototypes------------------------------------------------*/
/*********************************************************************************************************************/

/*********************************************************************************************************************/
/*---------------------------------------------Function Implementations----------------------------------------------*/
/*********************************************************************************************************************/
void Car_Stop_Gradually(void)
{
    while(RPM_CMD1 > 0 || RPM_CMD2 > 0)
    {
        RPM_CMD1 -= 50;
        RPM_CMD2 -= 50;

        if(RPM_CMD1 < 0)
        {
            RPM_CMD1 = 0;

        }
        if(RPM_CMD2 < 0)
        {
            RPM_CMD2 = 0;
        }

        delay_ms(100);
    }

    setMotorControl(0, 0);
    setMotor_B_Control(0, 0);
}



void Car_Change_Direction_Right(void)
{
    RPM_CMD2 = 2000;
}

void delay_ms(uint32 ms)
{
    uint32 ticks = IfxStm_getTicksFromMilliseconds(&MODULE_STM0, ms);
    IfxStm_waitTicks(&MODULE_STM0, ticks);
}
